worker_processes  auto;

error_log  /var/log/nginx/error.log warn;
pid        /tmp/nginx.pid;

events { worker_connections 1024; }

http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;

  sendfile on;
  keepalive_timeout 65;

  server_tokens off;

  server {
    listen       ${PORT};
    server_name  _;

    access_log  /var/log/nginx/access.log;
    root /out;
    autoindex on;

    location = /health {
      return 200 'ok';
      add_header Content-Type text/plain;
    }

    location / {
      try_files $uri $uri/ =404;
    }
  }
}
